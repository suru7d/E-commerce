<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#2e7d32" />
    <meta
      name="description"
      content="Green E-commerce Application - Sustainable shopping with eco-friendly features"
    />
    <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />
    <!--
      manifest.json provides metadata used when your web app is installed on a
      user's mobile device or desktop. See https://developers.google.com/web/fundamentals/web-app-manifest/
    -->
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    
    <!-- Green practice: Preconnect to minimize connection times -->
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    
    <!-- Green practice: Use system fonts to avoid font downloads when possible -->
    <!-- Only load a custom font if absolutely needed for branding -->
    <link 
      rel="stylesheet" 
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap"
      media="print"
      onload="this.media='all'"
    />
    
    <!-- Green practice: Preload critical CSS -->
    <link rel="preload" href="%PUBLIC_URL%/critical.css" as="style" />
    <link rel="stylesheet" href="%PUBLIC_URL%/critical.css" />
    
    <!-- Green practice: Use HTTP/2 Server Push for critical resources -->
    <title>Green Shop | Sustainable E-commerce</title>
    
    <!-- Green practice: Initial inline styles to prevent layout shifts -->
    <style>
      html, body {
        margin: 0;
        padding: 0;
        background-color: #f1f8e9;
        color: #33691e;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen,
          Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        min-height: 100vh;
      }
      
      #root {
        min-height: 100vh;
        display: flex;
        flex-direction: column;
      }
      
      /* Essential placeholder styles */
      .app-container {
        flex: 1;
        display: flex;
        flex-direction: column;
      }
      
      /* Fallback for loading state */
      .loading-placeholder {
        display: flex;
        align-items: center;
        justify-content: center;
        height: 100vh;
        width: 100%;
        flex-direction: column;
        background-color: #f1f8e9;
      }
      
      .loading-circle {
        width: 50px;
        height: 50px;
        border: 5px solid #c5e1a5;
        border-top-color: #2e7d32;
        border-radius: 50%;
        animation: spinner 1s linear infinite;
        margin-bottom: 20px;
      }
      
      @keyframes spinner {
        to {transform: rotate(360deg);}
      }
    </style>
    
    <!-- Green practice: Print styles that minimize ink usage -->
    <style media="print">
      body {
        background: white;
        color: black;
      }
      
      nav, footer, button, .no-print {
        display: none !important;
      }
    </style>
    
    <!-- Green practice: Preload scripts to minimize waterfall effects -->
    <link rel="modulepreload" href="%PUBLIC_URL%/static/js/main.chunk.js" />
  </head>
  <body>
    <noscript>
      <div style="padding: 20px; text-align: center;">
        <h1>JavaScript Required</h1>
        <p>We use JavaScript for energy-efficient rendering. Please enable it to continue.</p>
        <p>For accessibility without JavaScript, please contact support.</p>
      </div>
    </noscript>
    <div id="root">
      <!-- Initial loading state (for perceived performance) -->
      <div class="loading-placeholder">
        <div class="loading-circle"></div>
        <p>Loading Green Shop...</p>
        <small>Our energy-efficient app is starting up</small>
      </div>
    </div>
    
    <!-- Green practice: Only load below-the-fold content after paint -->
    <script>
      // Mark the time when the initial render happened
      document.addEventListener('DOMContentLoaded', function() {
        window.initialRenderTime = performance.now();
        console.log('Initial render time: ' + window.initialRenderTime + 'ms');
      });
      
      // Monitor memory usage (for development)
      if (window.performance && window.performance.memory) {
        setInterval(function() {
          const memoryUsage = window.performance.memory.usedJSHeapSize / (1024 * 1024);
          console.log('Memory usage: ' + memoryUsage.toFixed(2) + ' MB');
        }, 5000);
      }
    </script>
    
    <!-- Green practice: Reduce Carbon Footprint tracking -->
    <!-- This is a simple implementation of digital carbon tracking -->
    <script>
      // Simple carbon emission calculator for web pages
      window.calculatePageEmissions = function() {
        // Formula based on Website Carbon Calculator research
        // https://www.websitecarbon.com/
        // Simplified for demo purposes
        
        const bytesTransferred = performance
          .getEntriesByType('resource')
          .reduce((total, resource) => {
            return total + (resource.transferSize || 0);
          }, 0);
        
        // Convert bytes to kb
        const kbTransferred = bytesTransferred / 1024;
        
        // CO2 per page view in grams (very simplified calculation)
        // Average is about 1.76g CO2 per page view for typical sites
        // Our optimized site aims for 0.5g CO2 per page view
        const estimatedCO2 = (kbTransferred * 0.001).toFixed(3);
        
        console.log(`Estimated CO2 per page view: ${estimatedCO2}g`);
        return estimatedCO2;
      };
      
      // Calculate after load
      window.addEventListener('load', function() {
        // Wait 2 seconds to ensure all resources loaded
        setTimeout(window.calculatePageEmissions, 2000);
      });
    </script>
  </body>
</html>